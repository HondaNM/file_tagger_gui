# 文档标签工具 (File Tagger)

## 简介

文档标签工具是一个跨平台的文件标签管理系统，允许用户为文件创建标签，并通过标签快速搜索和定位文件。该工具使用文件系统链接（Windows快捷方式或Unix符号链接）来管理标签与文件的关系，确保数据的安全性和可移植性。

## 主要特性

### 🔖 文件标签管理
- **多标签支持**: 为单个文件添加多个标签
- **批量操作**: 同时为多个文件添加标签
- **标签创建**: 动态创建新标签
- **标签删除**: 安全删除不需要的标签

### 🔍 智能搜索
- **多标签搜索**: 支持AND/OR逻辑组合搜索
- **中文支持**: 完美支持中文标签和搜索
- **自动完成**: 智能标签建议和自动完成功能
- **实时过滤**: 基于输入内容实时过滤标签

### 📁 文件操作
- **拖拽支持**: 支持文件拖拽到应用程序
- **文件预览**: 在搜索结果中直接打开文件
- **路径复制**: 快速复制文件路径到剪贴板
- **位置打开**: 在文件管理器中打开文件位置

### 💾 数据备份
- **CSV导出**: 导出所有标签-文件关系到CSV文件
- **CSV导入**: 从CSV文件恢复标签-文件关系
- **跨平台兼容**: 支持Windows、macOS和Linux

### 🌐 跨平台支持
- **Windows**: 使用COM接口创建快捷方式
- **macOS/Linux**: 使用符号链接
- **统一界面**: 在所有平台上提供一致的用户体验

## 系统要求

### 基本要求
- Python 3.6+
- tkinter (通常随Python一起安装)

### 可选依赖
- `python-dotenv`: 环境变量管理
- `tkinterdnd2`: 拖拽功能支持
- `pywin32`: Windows快捷方式支持

### Windows编译要求
- `pyinstaller`: 用于编译可执行文件
- 所有基本依赖项
- 足够的磁盘空间（编译过程需要临时文件）

## 安装和运行

### 方法一：直接运行Python脚本

#### 1. 下载应用程序
```bash
# 确保文件有执行权限
chmod +x tagger_gui
```

#### 2. 运行应用程序
```bash
python3 tagger_gui
```

#### 3. 首次设置
- 程序启动时会提示选择标签根目录
- 选择或创建一个文件夹作为标签存储位置
- 程序会自动保存设置到 `.env` 文件

### 方法二：Windows用户编译为可执行文件

#### 1. 安装PyInstaller
```bash
pip install pyinstaller
```

#### 2. 编译应用程序
```bash
pyinstaller --onefile --name "文档标签工具" tagger_gui
```

#### 3. 运行可执行文件
- 编译完成后，可执行文件位于 `dist/` 目录中
- 双击 `文档标签工具.exe` 运行程序

#### 4. 可选编译参数
```bash
# 添加图标
pyinstaller --onefile --name "文档标签工具" --icon=icon.ico tagger_gui

# 隐藏控制台窗口
pyinstaller --onefile --name "文档标签工具" --windowed tagger_gui

# 包含额外数据文件
pyinstaller --onefile --name "文档标签工具" --add-data "README_中文.md;." tagger_gui
```

## 用户手册

### 界面概览

应用程序包含两个主要标签页：

#### 1. 文件标签 (File Tagging)
用于为文件添加标签的主要界面。

#### 2. 搜索文件 (File Search)
用于根据标签搜索文件的界面。

### 基本操作流程

#### 添加文件标签

1. **选择文件**
   - 点击"添加文件"按钮选择要标记的文件
   - 或直接将文件拖拽到应用程序窗口
   - 支持多文件选择

2. **选择标签**
   - 在标签列表中选择要应用的标签
   - 支持多选（按住Ctrl/Cmd键）
   - 可以创建新标签

3. **应用标签**
   - 点击"为选中文件打标签"按钮
   - 程序会为每个文件在每个选中的标签下创建链接

#### 搜索文件

1. **选择搜索标签**
   - 在"选择标签"列表中选择要搜索的标签
   - 或手动输入标签名称

2. **设置搜索逻辑**
   - **OR逻辑**: 显示具有任一选中标签的文件
   - **AND逻辑**: 显示同时具有所有选中标签的文件

3. **执行搜索**
   - 点击"搜索"按钮
   - 结果会显示在搜索结果区域

4. **操作文件**
   - 双击文件直接打开
   - 右键菜单提供更多操作选项

### 高级功能

#### 标签管理

**创建新标签**
- 菜单: 标签 → 新建标签
- 输入标签名称（支持中文）
- 标签会自动创建对应的文件夹

**删除标签**
- 菜单: 标签 → 删除标签
- 选择要删除的标签
- 确认删除操作

#### 数据备份

**导出到CSV**
- 菜单: 备份 → 导出到CSV
- 选择保存位置
- CSV文件包含所有标签-文件关系

**从CSV导入**
- 菜单: 备份 → 从CSV导入
- 选择CSV文件
- 确认导入操作
- 查看导入结果统计

#### 搜索技巧

**中文搜索**
- 支持中文标签名称
- 支持中文文件名
- 智能字符匹配

**英文搜索**
- 支持英文标签名称
- 支持英文文件名
- 单词级匹配

**混合搜索**
- 支持中英文混合标签
- 支持中英文混合文件名

### 快捷键

- `Ctrl+O`: 添加文件
- `Ctrl+N`: 新建标签
- `Ctrl+F`: 切换到搜索标签页
- `Ctrl+S`: 导出到CSV
- `Ctrl+I`: 从CSV导入
- `Enter`: 在搜索框中添加手动输入的标签

### 文件格式

#### CSV导出格式
```csv
tag,file_path,file_name
工作文档,/Users/username/Documents/work_report.pdf,work_report.pdf
个人照片,/Users/username/Pictures/vacation.jpg,vacation.jpg
```

#### 标签文件夹结构
```
标签根目录/
├── tag_工作文档/
│   ├── work_report.pdf.lnk
│   └── project_doc.docx.lnk
├── tag_个人照片/
│   ├── vacation.jpg.lnk
│   └── family.jpg.lnk
└── tag_项目文件/
    └── project_doc.docx.lnk
```

### 故障排除

#### 常见问题

**1. 文件链接失效**
- 原因: 原始文件被移动或删除
- 解决: 使用CSV导出功能备份数据，重新导入

**2. 标签不显示**
- 原因: 标签文件夹被手动删除
- 解决: 刷新标签列表或重新创建标签

**3. 搜索无结果**
- 检查标签名称是否正确
- 确认文件路径是否存在
- 验证搜索逻辑设置

**4. 权限错误**
- 确保对标签根目录有读写权限
- 检查文件系统权限设置

#### 日志文件
程序会在控制台输出详细的日志信息，包括：
- 文件操作状态
- 错误信息
- 性能统计

### 最佳实践

#### 标签命名
- 使用描述性的标签名称
- 保持标签名称的一致性
- 避免使用特殊字符（除了中文字符）

#### 文件组织
- 定期备份标签数据
- 使用CSV导出功能保存重要数据
- 定期清理无效的文件链接

#### 搜索优化
- 使用AND逻辑进行精确搜索
- 使用OR逻辑进行广泛搜索
- 利用自动完成功能快速输入标签, 点击dropdown按钮获得match的标签

### 技术细节

#### 文件链接类型
- **Windows**: 使用 `.lnk` 快捷方式文件
- **macOS/Linux**: 使用符号链接

#### 数据存储
- 标签信息存储在文件系统文件夹中
- 每个标签对应一个文件夹
- 文件链接存储在对应的标签文件夹中

#### 性能优化
- 延迟加载标签列表
- 异步文件操作
- 智能缓存机制

### Windows用户特别说明

#### 编译注意事项
- 确保安装了所有必需的Python包
- 如果使用虚拟环境，请在虚拟环境中编译
- 编译过程可能需要几分钟时间

#### 常见编译问题
**1. 缺少依赖项**
```bash
pip install python-dotenv pywin32
```

**2. 编译失败**
- 检查Python版本兼容性
- 确保所有导入的模块都已安装
- 尝试使用 `--debug=all` 参数查看详细错误信息

**3. 可执行文件过大**
- 使用 `--exclude-module` 排除不需要的模块
- 考虑使用 `--onedir` 而不是 `--onefile`

#### 运行注意事项
- 某些杀毒软件可能误报，需要添加信任
- 确保有足够的磁盘空间用于临时文件
- 首次运行可能需要较长时间

## 更新日志

### v1.0.0
- 初始版本发布
- 基本文件标签功能
- 搜索和过滤功能
- 跨平台支持

### v1.1.0
- 添加CSV导入/导出功能
- 改进中文搜索支持
- 优化用户界面
- 添加拖拽支持

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 贡献

欢迎提交问题报告和功能请求。如果您想贡献代码，请：

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交 GitHub Issue

---

**注意**: 本工具仅用于个人文件管理，请确保遵守相关法律法规和隐私政策。 
